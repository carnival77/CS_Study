# NoSQL

## 정의
No SQL. 비관계형 데이터베이스를 의미하며 테이블간의 관계를 정의하지 않고 스키마 없이 사용 가능하거나   
느슨한 스키마를 제공하는 저장소를 말한다.   


## 🤚 SQL(RDBMS) vs NoSQL 비교

### SQL 

- 데이터는 정해진 데이터 스키마에 따라 테이블에 저장  
  
    - 각 테이블은 각 데이터들을 구분할수있는 Field 와 데이터인 Record 로 이루어져있음
- 데이터는 관계를 통해 여러 테이블에 분산 - 데이터의 중복 방지
- **스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없음**


### NoSQL 

- 스키마 없음
- 테이블간 연관관계 없음
- 스키마가 없기 때문에 다른 구조의 데이터를 같은 컬렉션(sql의 테이블)에 추가 할 수 있다.
- RDBMS의 레코드를 Document 라고 부름.
    
    - JSON 과 비슷한 형태를 가지고 있음 
    
- 테이블과의 관계가 없으므로 Join 의 개념이 없으며 모든 정보를 한 테이블에 저장
- 데이터가 중복되기 때문에 모든 컬렉션에서 똑같이 데이터를 업데이트 해줘야함
- 분산형 구조

    > NoSQL은 기존 RDBMS와는 다르게 하나의 고성능 머신에 데이터를 저장하는 것이 아니라 일반적인 서버 수십 대를 연결해 데이터를 저장 및 처리하는 구조를 갖는다. 즉 분산형 구조를 통해 데이터를 여러 대의 서버에 분산해 저장하고 분산 시에 데이터를 상호 복제해 특정 서버에 장애가 발생했을 때에도 데이터 유실이나 서비스 중지가 없는 구조의 형태를 가진다.
    
    👉 RDBMS 가 클라이언트/서버 환경에 맞는 데이터 저장기술이라면, NoSQL은 클라우드 환경에 맞는 저장 기술이다.


- RDBMS의 한계를 극복하기 위해 만든 데이터 베이스


### NoSQL의 장점

 #### 유연성
- 유연한 스키마를 제공하여, 보다 빠르고 반복적인 개발이 가능. 
- 유연한 데이터 모델은 NoSQL 데이터베이스를 반정형 및 데이터에 이상적으로 만들어 줌

 #### 확장성
- 일반적으로 고가의 강력한 서버를 추가하는 대신 분산형 하드웨어 클러스터를 이용해 확장하도록 설계
    
 #### 고성능 
- 관계형 데이터베이스를 통해 유사한 기능을 충족하려 할 때보다 뛰어난 성능을 낼 수 있음

 #### 고기능성
- NoSQL 데이터베이스는 각 데이터 모델에 맞추어 특별히 구축된 뛰어난 기능의 API와 데이터 유형을 제공



## NoSQL CAP 이론

분산형 구조는 일관성(Consistency), 가용성(Availability), 분산 허용(Partitioning Tolerance)의 3가지 특징을 가지고 있다.

<br>

### 일관성(Consistency)
 
- 동시성 또는 동일성이라고도 하며 다중 클라이언트에서 같은 시간에 조회하는 데이터는 항상 동일한 데이터임을 보증
- 일관성을 유지하기 위한 데이터의 동기화에는 두가지 방법이 사용된다.
  
    <br>  

    - 데이터의 저장 결과를 클라이언트로 응답하기 전에 모든 노드에 데이터를 저장하는 동기식 방법
        -  느린 응답시간을 보이지만 데이터의 정합성을 보장
        
        <br>
           
    - 메모리나 임시 파일에 기록하고 클라이언트에 먼저 응답한 다음, 특정 이벤트 또는 프로세스를 사용하여 노드로 데이터를 동기화하는 비동기식 방법
        - 빠른 응답시간을 보인다는 장점이 있지만, 쓰기 노드에 장애가 발생하였을 경우 데이터가 손실될 수 있음
    
<br>

### 가용성(Availability)

- 모든 클라이언트의 읽기와 쓰기 요청에 대하여 항상 응답이 가능해야 함을 보증, 내고장성
- 내고장성을 가진 NoSQL 은 클러스터 내에서 몇 개의 노드가 망가지더라도 정상적인 서비스가 가능

<br>

### 네트워크 분할 허용성(Partition tolerance)
- 지역적으로 분할된 네트워크 환경에서 동작하는 시스템에서 두 지역 간의 네트워크가 단절되거나 네트워크 데이터의 유실이 일어나더라도 각 지역 내의 시스템은 정상적으로 동작해야 함

<br>


